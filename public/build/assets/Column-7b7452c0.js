import{f as c,K as b,u as i,o as r,c as d,b as s,t as f,l as g,m as _,v as y,p as k,i as p,F as v,h as D,T as S,_ as T}from"./app-47daf49c.js";const w={key:0,class:"modal"},F={class:"glass container"},M={class:"modal-header"},U={class:"title"},V={class:"modal-content"},B={class:"form-input pt-5 pb-2.5"},C=s("label",{for:"title"},"Title",-1),A={class:"form-select"},E=["value"],L={key:1,value:"-1"},N=["value"],P=s("label",{for:"position"},"Position",-1),R=s("div",null,[s("button",{type:"submit",class:"button w-full"},"Save")],-1);let l=c(),m=c(),u=c();c();let a=c();const h=c(),$=b(),j={name:"columnModal",setup(){return{data:l,title:m}},methods:{open(e,n=null){const t={title:e.title,position:e.position,board_id:e.board_id||n};if(e.id&&(t._method="PUT"),a=$.props.columns,!a.length)t.position=-1;else{t.position=0;for(let o in a)a[o].position>t.position&&(t.position=a[o].position);t.position++}u=S(t),l.value=e,m.value=e.title,setTimeout(()=>h.value.focus(),100)},close(){l.value=null},submit(){let e="/columns/";l.value.id&&(e+=l.value.id),u.post(e,{forceFormData:!0,onError:n=>{n.msg},onSuccess:()=>{T.show("Column saved successfully","success"),this.close()}})},image(e){const n=e.target.files[0],t=new FileReader;t.readAsDataURL(n),t.onload=()=>{e.target.previousSibling.src=t.result}}}},K=Object.assign(j,{setup(e){return(n,t)=>i(l)?(r(),d("div",w,[s("div",F,[s("div",M,[s("a",{class:"btn-close",onClick:t[0]||(t[0]=o=>n.close())}),s("h4",U,f(i(m)),1)]),s("div",V,[s("form",{class:"form",onSubmit:t[3]||(t[3]=g((...o)=>n.submit&&n.submit(...o),["prevent"]))},[s("div",B,[_(s("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>i(u).title=o),id:"title",placeholder:"Title",ref_key:"focus",ref:h},null,512),[[y,i(u).title]]),C]),s("div",A,[_(s("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i(u).position=o),id:"position"},[i(l).id?(r(),d("option",{key:0,value:i(l).position},"Don't change",8,E)):p("",!0),!i(a).length||i(l).id!=i(a)[0].id?(r(),d("option",L,"First")):p("",!0),(r(!0),d(v,null,D(i(a),o=>(r(),d(v,null,[i(l).id!=o.id?(r(),d("option",{key:o.id,value:o.position+1},"After: "+f(o.title),9,N)):p("",!0)],64))),256))],512),[[k,i(u).position]]),P]),R],32)])])])):p("",!0)}});export{K as default};
